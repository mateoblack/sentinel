---
phase: 78.1-sso-credential-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [cli/bootstrap_test.go]
autonomous: true
---

<objective>
Add test coverage for bootstrap command SSO credential loading via --aws-profile flag.

Purpose: Verify the --aws-profile flag correctly flows to WithSharedConfigProfile for SSO credential loading.
Output: Test coverage for bootstrap SSO profile credential loading pattern.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/76-sso-credential-loading/76-04-SUMMARY.md

@cli/bootstrap.go
@cli/bootstrap_test.go
@cli/credentials_test.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add AWSProfile test for bootstrap command input</name>
  <files>cli/bootstrap_test.go</files>
  <action>Add TestBootstrapCommand_UsesAWSProfileForCredentials test function following the pattern in credentials_test.go:1201-1290. Test should verify:
  1. AWSProfile field exists in BootstrapCommandInput struct
  2. AWSProfile value flows through correctly (input struct accepts value)
  3. SSO profile configuration is recognized when AWS_CONFIG_FILE points to SSO config
  Import filepath and vault packages if not already imported.</action>
  <verify>go test -v -run TestBootstrapCommand_UsesAWSProfile ./cli/ passes</verify>
  <done>TestBootstrapCommand_UsesAWSProfileForCredentials test exists and passes</done>
</task>

<task type="auto">
  <name>Task 2: Add SSO profile configuration validation test</name>
  <files>cli/bootstrap_test.go</files>
  <action>Add sub-tests to verify SSO profile handling:
  1. "aws-profile accepts SSO profile name" - verify AWSProfile field can hold an SSO profile name
  2. "SSO profile is recognized for bootstrap credentials" - create temp config with SSO profile, verify vault.LoadConfig recognizes SSO settings
  Follow the three sub-test pattern from sentinel_exec_test.go:630-721.</action>
  <verify>go test -v -run TestBootstrapCommand_UsesAWSProfile ./cli/ passes all sub-tests</verify>
  <done>All bootstrap SSO profile tests pass</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] go test -v -run TestBootstrapCommand_UsesAWSProfile ./cli/ passes
- [ ] Tests follow pattern from credentials_test.go and sentinel_exec_test.go
- [ ] All imports are correct (filepath, os, vault)
</verification>

<success_criteria>

- TestBootstrapCommand_UsesAWSProfileForCredentials function exists
- Tests verify AWSProfile field acceptance
- Tests verify SSO profile configuration recognition
- All tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/78.1-sso-credential-fixes/78.1-01-SUMMARY.md`
</output>
