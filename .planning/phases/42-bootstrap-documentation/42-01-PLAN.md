---
phase: 42-bootstrap-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [docs/BOOTSTRAP.md]
autonomous: true
---

<objective>
Create comprehensive bootstrap documentation for Sentinel AWS setup.

Purpose: Enable users to set up Sentinel's SSM policy infrastructure with clear guidance on commands, security properties, IAM requirements, and adoption paths.
Output: docs/BOOTSTRAP.md with setup guide, security properties, and adoption guide.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Bootstrap feature context (completed phases 35-41):
@bootstrap/types.go
@bootstrap/iam.go
@bootstrap/generator.go
@bootstrap/format.go
@cli/bootstrap.go
@cli/status.go

# Reference for documentation style:
@docs/ENFORCEMENT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create docs/BOOTSTRAP.md with comprehensive setup guide</name>
  <files>docs/BOOTSTRAP.md</files>
  <action>
Create documentation covering:

**1. Overview Section:**
- What bootstrap does (SSM policy parameters, IAM policies)
- Default policy root (/sentinel/policies)
- How Sentinel reads policies at runtime

**2. Quick Start:**
- Basic bootstrap command: `sentinel init bootstrap --profile <name>`
- Plan mode first: `sentinel init bootstrap --profile <name> --plan`
- Auto-approve: `sentinel init bootstrap --profile <name> --yes`
- Check status: `sentinel init status`

**3. Command Reference:**

`sentinel init bootstrap`:
- `--profile` (required, repeatable): Profile names to bootstrap
- `--plan`: Show plan without applying (dry-run)
- `--yes` / `-y`: Auto-approve, skip confirmation
- `--policy-root`: Custom SSM path prefix (default: /sentinel/policies)
- `--region`: AWS region for SSM operations
- `--generate-iam-policies`: Output IAM policy documents
- `--json`: Machine-readable output
- `--description`: Description for generated policy comments

`sentinel init status`:
- `--policy-root`: Custom SSM path prefix
- `--region`: AWS region
- `--json`: Machine-readable output

**4. What Gets Created:**
- SSM Parameters: One per profile at {policy_root}/{profile}
- Initial policy content (default deny, requires customization)
- Parameter versioning for audit trail

**5. IAM Requirements:**
- SentinelPolicyReader: ssm:GetParameter, ssm:GetParameters, ssm:GetParametersByPath
- SentinelPolicyAdmin: Above plus ssm:PutParameter, ssm:DeleteParameter, ssm:AddTagsToResource, ssm:RemoveTagsFromResource
- Include actual policy JSON examples (use GenerateReaderPolicy/GenerateAdminPolicy output format)
- ARN pattern: arn:aws:ssm:*:*:parameter/sentinel/policies/*

**6. Security Properties:**
- Policies stored in SSM (not local files) - centralized, auditable
- IAM-protected access to policy parameters
- Version history maintained by SSM
- Wildcard region/account in generated IAM policies (can be restricted)
- String type for parameters (not SecureString - policy YAML is not sensitive)

**7. Multi-Profile Bootstrap:**
```bash
sentinel init bootstrap --profile dev --profile staging --profile prod
```

**8. Custom Policy Root:**
```bash
sentinel init bootstrap --profile myapp --policy-root /myorg/sentinel/policies
```

**9. Adoption Guide:**
- Step 1: Bootstrap profiles (creates SSM parameters with default-deny policy)
- Step 2: Customize policies (edit SSM parameters directly or via IaC)
- Step 3: Configure credential_process in ~/.aws/config
- Step 4: Test with `sentinel credentials --profile <name>`
- Step 5: (Optional) Enable enforcement via trust policies/SCPs (see ENFORCEMENT.md)

**10. Troubleshooting:**
- "NoCredentialProviders" - Need AWS credentials to access SSM
- "AccessDenied" on SSM - Attach SentinelPolicyReader/Admin IAM policy
- Parameter already exists - Use --plan to see existing state
- Policy syntax errors - SSM stores raw YAML, Sentinel validates at runtime

Match the style of ENFORCEMENT.md: clear sections, practical examples, code blocks for commands and JSON.
  </action>
  <verify>cat docs/BOOTSTRAP.md | head -100 shows structured documentation</verify>
  <done>docs/BOOTSTRAP.md exists with all sections: Overview, Quick Start, Command Reference, What Gets Created, IAM Requirements, Security Properties, Multi-Profile, Custom Policy Root, Adoption Guide, Troubleshooting</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] docs/BOOTSTRAP.md exists and is well-structured
- [ ] All command flags documented with examples
- [ ] IAM policy examples are valid JSON
- [ ] Links to related docs (ENFORCEMENT.md) are correct
- [ ] Troubleshooting section covers common issues
</verification>

<success_criteria>

- docs/BOOTSTRAP.md created with comprehensive content
- All bootstrap commands and flags documented
- IAM requirements clearly explained with policy examples
- Adoption guide provides clear step-by-step path
- Troubleshooting section addresses common issues
</success_criteria>

<output>
After completion, create `.planning/phases/42-bootstrap-documentation/42-01-SUMMARY.md`
</output>
