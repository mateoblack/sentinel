---
phase: 87-docs-testing
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/guide/commands.md
  - docs/QUICKSTART.md
autonomous: true
---

<objective>
Document shell integration feature and add examples for daily usage.

Purpose: Complete the v1.11 Shell Integration milestone by documenting the `sentinel shell init` command and providing examples for developers to set up shell functions.
Output: Updated commands.md with shell init reference, updated QUICKSTART.md with shell integration section.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/84-shell-init-command/84-01-SUMMARY.md
@.planning/phases/85-server-mode-variants/85-01-SUMMARY.md
@.planning/phases/86-shell-completions/86-01-SUMMARY.md
@shell/shell.go
@cli/shell_init.go
@docs/guide/commands.md
@docs/QUICKSTART.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add shell init command to commands.md</name>
  <files>docs/guide/commands.md</files>
  <action>
Add a new "## Shell Commands" section at the end of commands.md (after Server Session Commands section) with:

1. Section header: `## Shell Commands`
2. Subsection: `### shell init`

Include:
- Description: Generates shell wrapper functions for all Sentinel profiles discovered from SSM
- Usage pattern: `sentinel shell init [flags]`
- Flags table:
  | Flag | Description | Required |
  |------|-------------|----------|
  | `--policy-root` | SSM parameter path prefix for policies | No (default: /sentinel/policies) |
  | `--region` | AWS region for SSM operations | No |
  | `--aws-profile` | AWS profile for credentials | No |
  | `--format` | Output format: bash, zsh | No (default: auto-detect from $SHELL) |
  | `--include-server` | Also generate -server variants for real-time revocation mode | No (default: false) |

- Examples section with:
  - Basic usage: `eval "$(sentinel shell init)"`
  - Add to shell profile: `echo 'eval "$(sentinel shell init)"' >> ~/.bashrc`
  - With server mode variants: `eval "$(sentinel shell init --include-server)"`
  - Specifying format: `sentinel shell init --format zsh`
  - Custom policy root: `sentinel shell init --policy-root /custom/policies`

- Output section: Show example generated script with function definition and completions
- Explain that functions are named `sentinel-{profile}` and server variants are `sentinel-{profile}-server`

Follow the existing command documentation format in commands.md (see credentials, exec, etc. as reference).
  </action>
  <verify>grep -q "shell init" docs/guide/commands.md && grep -q "include-server" docs/guide/commands.md</verify>
  <done>Shell init command fully documented in commands.md with all flags, examples, and output format</done>
</task>

<task type="auto">
  <name>Task 2: Add shell integration section to QUICKSTART.md</name>
  <files>docs/QUICKSTART.md</files>
  <action>
Add a "## Daily Usage: Shell Functions" section before the "## What's Next" section with:

1. Brief intro: Explains that typing full `sentinel exec ...` commands is tedious for daily use
2. One-time setup: Show how to add to shell profile:
   ```bash
   # Add to ~/.bashrc or ~/.zshrc:
   eval "$(sentinel shell init)"
   ```

3. Usage examples:
   ```bash
   # Instead of:
   sentinel exec --profile production --policy-parameter /sentinel/policies/production -- aws s3 ls

   # Just use:
   sentinel-production aws s3 ls
   ```

4. Server mode (optional): Show --include-server for real-time revocation
   ```bash
   # For real-time revocation mode:
   eval "$(sentinel shell init --include-server)"

   # Then use:
   sentinel-production-server aws s3 ls
   ```

5. Keep it concise - this is a quickstart, detailed docs are in commands.md
  </action>
  <verify>grep -q "shell init" docs/QUICKSTART.md && grep -q "sentinel-production" docs/QUICKSTART.md</verify>
  <done>QUICKSTART.md includes shell integration section with daily usage examples</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Shell init command section exists in docs/guide/commands.md
- [ ] All flags documented (--policy-root, --region, --aws-profile, --format, --include-server)
- [ ] Examples show eval, shell profile setup, and server mode variants
- [ ] QUICKSTART.md includes shell integration section
- [ ] Documentation follows existing format/style in each file
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Shell init command fully documented
- QUICKSTART.md provides clear daily usage pattern
- Documentation is consistent with existing style
</success_criteria>

<output>
After completion, create `.planning/phases/87-docs-testing/87-01-SUMMARY.md`
</output>
