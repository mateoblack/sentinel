---
phase: 142-deployment-guide-review
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/guide/deployment.md
autonomous: true
---

<objective>
Review and update docs/guide/deployment.md for accuracy with v1.18 features.

Purpose: Ensure deployment documentation is accurate and complete for users deploying Sentinel with all v1.13-v1.18 features.
Output: Updated deployment.md with current syntax, no deprecated patterns, and v1.18 feature coverage.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/141-readme-examples/141-01-SUMMARY.md

# Key documentation files for cross-reference
@docs/guide/deployment.md
@docs/SECURITY_HARDENING.md
@docs/POLICY_SIGNING.md
@docs/DEVICE_POSTURE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add KMS encryption to DynamoDB table examples</name>
  <files>docs/guide/deployment.md</files>
  <action>
Update all DynamoDB create-table examples (requests, breakglass, sessions) to include SSE with AWS managed KMS encryption. This aligns with v1.16 security hardening.

For each table, add `--sse-specification Enabled=true,SSEType=KMS` to the AWS CLI create-table command.

Current examples use PAY_PER_REQUEST billing but don't show encryption. The Terraform examples already have `server_side_encryption` blocks - verify they're correct and consistent.

Also verify the breakglass table example exists (it does in current file) and has encryption.
  </action>
  <verify>grep -c "SSEType=KMS\|sse-specification" docs/guide/deployment.md shows encryption in CLI examples</verify>
  <done>All three DynamoDB table CLI examples (requests, breakglass, sessions) include KMS encryption flag</done>
</task>

<task type="auto">
  <name>Task 2: Add Lambda TVM and policy commands to Related Documentation</name>
  <files>docs/guide/deployment.md</files>
  <action>
Add links to v1.14-v1.18 documentation in the "Related Documentation" section at the bottom of deployment.md:

Current section has:
- Bootstrap Guide
- Enforcement Patterns
- CloudTrail Correlation
- Assurance Guide

Add:
- Lambda TVM Deployment (../LAMBDA_TVM_DEPLOYMENT.md) - Server-side credential vending
- Policy Signing (../POLICY_SIGNING.md) - KMS-based policy integrity
- Device Posture (../DEVICE_POSTURE.md) - MDM integration
- Security Hardening (../SECURITY_HARDENING.md) - v1.16+ security features
- Commands Reference (commands.md) - CLI reference including policy commands

Keep the existing links, add new ones alphabetically or in logical groupings.
  </action>
  <verify>grep -E "LAMBDA_TVM|POLICY_SIGNING|DEVICE_POSTURE|SECURITY_HARDENING" docs/guide/deployment.md shows new links</verify>
  <done>Related Documentation section includes links to Lambda TVM, Policy Signing, Device Posture, and Security Hardening guides</done>
</task>

<task type="auto">
  <name>Task 3: Update policy management section with v1.17 commands</name>
  <files>docs/guide/deployment.md</files>
  <action>
The "Updating Policies" section currently shows raw AWS CLI commands for downloading/uploading policies. Update it to recommend the v1.17 policy commands as the preferred workflow:

Replace or augment the current example with:
```bash
# Download policy
sentinel policy pull prod -o policy.yaml

# Edit policy.yaml

# Validate locally (no AWS credentials needed)
sentinel policy validate policy.yaml

# Preview changes
sentinel policy diff prod policy.yaml

# Upload (with confirmation prompt)
sentinel policy push prod policy.yaml
```

Keep the AWS CLI examples as an alternative for users without sentinel installed, but make the sentinel commands primary.

Also add a note about policy signing for high-security deployments:
```bash
# For signed policies (v1.18+)
sentinel policy push prod policy.yaml --sign --key-id alias/sentinel-signing
```
  </action>
  <verify>grep -E "sentinel policy pull|sentinel policy push|sentinel policy diff" docs/guide/deployment.md shows v1.17 commands</verify>
  <done>Updating Policies section shows sentinel policy commands as primary workflow with signing option</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All DynamoDB CLI examples include KMS encryption
- [ ] Related Documentation section has 5+ new links
- [ ] Policy management section uses sentinel policy commands
- [ ] No deprecated commands or outdated flags in examples
- [ ] File renders correctly as markdown
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- deployment.md is accurate for v1.18
- Users can follow guide to deploy Sentinel with current features
</success_criteria>

<output>
After completion, create `.planning/phases/142-deployment-guide-review/142-01-SUMMARY.md`
</output>
