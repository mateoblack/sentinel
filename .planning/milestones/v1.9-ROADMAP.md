# Milestone v1.9: SSO Profile Support

**Status:** SHIPPED 2026-01-19
**Phases:** 76-77
**Total Plans:** 6

## Overview

Fix systemic bug where --profile flag doesn't load SSO credentials, ensuring all Sentinel commands work seamlessly with SSO profiles like AWS CLI does.

## Phases

### Phase 76: SSO Credential Loading

**Goal**: Integrate with AWS SDK SSO credential provider chain so all commands properly load SSO credentials from --profile
**Depends on**: v1.8 complete
**Plans**: 5 plans

Plans:
- [x] 76-01: Core command SSO credential loading (credentials, exec) — completed 2026-01-19
- [x] 76-02: Approval workflow command SSO credential loading — completed 2026-01-19
- [x] 76-03: Break-glass command SSO credential loading — completed 2026-01-19
- [x] 76-04: Infrastructure command SSO credential loading — completed 2026-01-19
- [x] 76-05: Permissions and audit command SSO credential loading — completed 2026-01-19

**Details:**
- Added config.WithSharedConfigProfile to credentials and sentinel exec commands
- Added --aws-profile flag to approval workflow commands (approve, deny, list)
- Added --aws-profile flag to break-glass commands (breakglass-check, breakglass-close, breakglass-list)
- Added --aws-profile flag to infrastructure commands (bootstrap, status, config validate)
- Added --aws-profile flag to permissions and audit commands

### Phase 77: Whoami Profile Flag

**Goal**: Add --profile flag to whoami command (currently missing entirely)
**Depends on**: Phase 76
**Plans**: 1 plan

Plans:
- [x] 77-01: Add --profile flag to whoami command for SSO credential loading — completed 2026-01-19

**Details:**
- Added --profile flag using same WithSharedConfigProfile pattern
- Used --profile (not --aws-profile) since whoami has no concept of target profile

---

## Milestone Summary

**Key Decisions:**
- config.WithSharedConfigProfile added to awsCfgOpts initialization for AWS SDK credential loading
- Profile is always passed to AWS SDK (even for non-SSO profiles) - SDK handles both correctly
- Use --aws-profile for commands with existing --profile (target profile) vs --profile for whoami (credentials only)

**Issues Resolved:**
- Fixed --profile flag not loading SSO credentials across all Sentinel CLI commands
- All commands now work seamlessly with SSO profiles like AWS CLI does

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
