# Milestone v1.17: Policy Developer Experience

**Status:** SHIPPED 2026-01-26
**Phases:** 121-125
**Total Plans:** 5

## Overview

Developer workflow for policy editing with pull, push, diff, and validate commands for SSM-backed policies. Enables policy developers to fetch, edit, compare, and validate Sentinel policies locally before pushing changes to SSM Parameter Store.

## Phases

### Phase 121: Policy Schema Enhancements

**Goal**: Extend policy schema with version field and validation helpers for tooling
**Depends on**: v1.16 complete
**Plans**: 1 plan

Plans:
- [x] 121-01: Schema version validation and YAML helpers — completed 2026-01-26

**Details:**
- Added Version type with IsValid() and IsCurrent() methods
- Created MarshalPolicy and MarshalPolicyToWriter for serialization
- Exported ValidatePolicy and ValidatePolicyFromReader as CLI entry points
- Error messages distinguish parse errors from validation errors

### Phase 122: Policy Pull Command

**Goal**: Fetch policy from SSM to stdout or file with formatting options
**Depends on**: Phase 121
**Plans**: 1 plan

Plans:
- [x] 122-01: Policy pull command implementation — completed 2026-01-26

**Details:**
- Implemented `sentinel policy pull <profile>` command
- Support for --output flag to write to file vs stdout
- Support for --policy-root and --policy-parameter path customization
- Clean YAML output to stdout, informational messages to stderr

### Phase 123: Policy Push Command

**Goal**: Validate and upload policy to SSM with confirmation and backup
**Depends on**: Phase 122
**Plans**: 1 plan

Plans:
- [x] 123-01: Policy push command implementation — completed 2026-01-26

**Details:**
- Implemented `sentinel policy push <profile> <file>` command
- Extended SSMAPI interface with PutParameter method
- Confirmation prompt with --force flag for automation
- Full validation before upload, backup detection

### Phase 124: Policy Diff Command

**Goal**: Show pending changes between local file and SSM with unified diff format
**Depends on**: Phase 123
**Plans**: 1 plan

Plans:
- [x] 124-01: Policy diff command implementation — completed 2026-01-26

**Details:**
- Implemented `sentinel policy diff <profile> <file>` command
- LCS-based unified diff algorithm
- Color output (green +, red -, cyan @@) with --no-color option
- Exit code 0 = no changes, 1 = changes exist (scripting-friendly)

### Phase 125: Policy Validate Command

**Goal**: Local YAML syntax and schema validation without SSM access
**Depends on**: Phase 124
**Plans**: 1 plan

Plans:
- [x] 125-01: Policy validate command implementation — completed 2026-01-26

**Details:**
- Implemented `sentinel policy validate <file>` command
- No AWS credentials required - pure local validation
- --quiet/-q flag for CI/CD integration
- Exit code 0 = valid, 1 = invalid

---

## Milestone Summary

**Key Decisions:**
- Version is a string type alias (type Version string) for YAML compatibility
- SupportedVersions is a slice for future schema extensibility
- ValidatePolicy distinguishes parse errors from validation errors for CLI UX
- Extended existing SSMAPI interface with PutParameter (unified read/write)
- Use types.ParameterTypeString (not SecureString) matching bootstrap pattern
- Confirmation prompt with --force flag for automation bypass
- Exit code 0 = no changes, 1 = changes exist (scripting-friendly)
- Normalize policies via parse/marshal before comparison
- Color output enabled by default, --no-color flag to disable

**Issues Resolved:**
- None

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
