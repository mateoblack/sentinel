# Milestone v1.4: Sentinel Bootstrapping

**Status:** ✅ SHIPPED 2026-01-16
**Phases:** 35-42
**Total Plans:** 8

## Overview

Sentinel Bootstrapping provides automated setup of AWS resources for Sentinel deployments. The bootstrap system analyzes existing infrastructure, generates sample policies, creates SSM parameters, and produces IAM policy documents for least-privilege access.

## Phases

### Phase 35: Bootstrap Schema

**Goal**: Define bootstrap configuration types, resource state tracking, and validation logic
**Depends on**: v1.3 complete
**Plans**: 1 plan

Plans:
- [x] 35-01: Bootstrap configuration and resource types with validation

**Details:**
- ResourceState includes 'exists' and 'skip' as separate states for clarity
- PlanSummary.ToSkip counts both skip and exists states
- SSM path validation uses regex for alphanumeric, /, -, _ characters
- Profile name validation matches AWS conventions

### Phase 36: Bootstrap Planner

**Goal**: Create Planner that queries SSM for existing resources and determines required actions
**Depends on**: Phase 35
**Plans**: 1 plan

Plans:
- [x] 36-01: SSM interface and Planner with existence checks and output formatting

**Details:**
- ssmAPI interface follows notification/sns.go pattern for testability
- Planner validates config before making any SSM calls
- IAM policy documents always show StateCreate (generated, not actual IAM resources)
- Format symbols: + (create), ~ (update), = (exists), - (skip)

### Phase 37: SSM Parameter Creation

**Goal**: Create Executor that applies planned resources to SSM Parameter Store
**Depends on**: Phase 36
**Plans**: 1 plan

Plans:
- [x] 37-01: Executor with Apply method for SSM parameter creation

**Details:**
- Use String type for parameters (not SecureString) since policy YAML is not sensitive
- Overwrite=false for create to detect race conditions
- Continue processing on individual failures (don't abort entire apply)
- Skip IAM policy resources (not SSM) and non-actionable states

### Phase 38: Sample Policy Generation

**Goal**: Generate starter Sentinel policy YAML based on profile configuration
**Depends on**: Phase 37
**Plans**: 1 plan

Plans:
- [x] 38-01: Sample policy generator with profile-based rules

### Phase 39: IAM Policy Generation

**Goal**: Generate IAM policy documents for Sentinel's required SSM permissions
**Depends on**: Phase 38
**Plans**: 1 plan

Plans:
- [x] 39-01: IAM policy document types and generator functions

### Phase 40: Bootstrap Command

**Goal**: Create `sentinel bootstrap` CLI command with plan and apply modes
**Depends on**: Phase 39
**Plans**: 1 plan

Plans:
- [x] 40-01: Bootstrap command structure with plan mode

### Phase 41: Status Command

**Goal**: Create `sentinel bootstrap status` command to check deployment health
**Depends on**: Phase 40
**Plans**: 1 plan

Plans:
- [x] 41-01: Status CLI command with human and JSON output

**Details:**
- Separate ssmStatusAPI interface (GetParametersByPath) from planner's ssmAPI (GetParameter)
- Non-recursive query (Recursive=false) to get direct children only
- Human output includes profile name padding for alignment

### Phase 42: Bootstrap Documentation

**Goal**: Create setup guides and operational documentation for bootstrap system
**Depends on**: Phase 41
**Plans**: 1 plan

Plans:
- [x] 42-01: Bootstrap documentation (BOOTSTRAP.md)

---

## Milestone Summary

**Key Decisions:**
- ResourceState includes 'exists' and 'skip' as separate states for clarity
- ssmAPI interface follows notification/sns.go pattern for testability
- Use String type for SSM parameters (not SecureString)
- Separate ssmStatusAPI interface for status command

**Issues Resolved:**
- N/A — clean implementation

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
